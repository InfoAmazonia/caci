section#dossies(ng-show='dossiers.length' ng-class='{collapsed: initialized, "in-case": isCase}')
  h2 Dossiês
  ul.dossie-list
    li(ng-repeat='dossier in dossiers')
      .image(style='background-image:url({{dossier.featured_image.attachment_meta.sizes.large.url}});')
      article
        h3
          a(ui-sref='home.dossier({id: dossier.ID})') {{dossier.title}}

section#content(autoscroll='false')
  section#casos(ng-class='{collapsed: isDossier, "in-case": isCase}')
    form#casos-filters(ng-show='initialized')
      input(type='text' ng-model='filter.text' placeholder='Digite sua busca')
      select(ng-model='filter.strict.uf' ng-options='uf for uf in dropdownFilters.uf track by uf')
        option(value='') Selecione um estado
      select(ng-model='filter.strict.povo' ng-options='povo for povo in dropdownFilters.povo track by povo')
        option(value='') Selecione um povo
      select(ng-model='filter.strict.relatorio' ng-options='relatorio for relatorio in dropdownFilters.relatorio track by relatorio')
        option(value='') Selecione um relatório
      div(range-slider min='dateFilters[0] || 0' max='dateFilters[1] || 0' model-max='filter.date.max' model-min='filter.date.min' show-values="true")
      h2.results-count {{filtered.length}} casos encontrados
    ul.caso-list(ng-show='casos.length && initialized')
      li.clearfix(ng-repeat='caso in filtered = (casos | filter:filter.text | exact:filter.strict | dateFilter:filter.date | caseIds:dossierCases) | limitTo:50')
        article
          .location
            span.icon.icon-pin
            p.location-info
              a(ng-click="focusMap(caso)" href="javascript:void(0);" ng-bind-html='caso | caseLocation')
          header.caso-header
            h3
              a(ui-sref='home.case({id: caso.ID})' force-onclick='600' force-parent='casos') {{caso | casoName}}
            .header-meta
              .age.meta(ng-show='caso.idade')
                span.icon.icon-chevron-small-right
                p {{caso.idade}} anos
              .village.meta(ng-show='caso.aldeia')
                span.icon.icon-home
                p {{caso.aldeia}}
              .date.meta
                span.icon.icon-calendar
                p.date-info(ng-bind-html='caso | casoDate')
          p {{caso.descricao}}
          p.report(ng-show='caso.relatorio') {{caso.relatorio}}

.map-container(ng-class='{full: isDossier, "in-case": isCase}')
  map#map(map-data='mapData' markers='filtered | postToMarker')
  
div(ui-view)
